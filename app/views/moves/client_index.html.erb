<div class="container-full d-flex justify-content-end addmove">
  <%= link_to "Add a new move", new_move_path, class: "small_button" %>
</div>
<div class="container d-flex justify-content-center">
  <h1 class="moves-text">My published moves</h1>
</div>
<div class="movescard" id="client-index">
  <% @moves.each do |move| %>
    <div class="card popup" data-controller="popup" data-popup-id-value="<%= move.id %>">
      <% bid = move.bids.where(status: "pending").or(move.bids.where(status: "confirmed")).first %>
      <% if bid %>
        <div class="bid-tag">
          <%= link_to "bid", bid_path(bid) %>
        </div>
      <% end %>
        <div id="indexcard" class="card-body">
        <div class="delete_button_wrapper">
          <%= link_to  move_path(move.id), class: "delete-button", data: { turbo_method: :delete, turbo_confirm: "Are you sure?" } do %>
            <i class="fa-solid fa-times"></i>
          <% end
           %>
        </div>
        <div class="d-flex align-items-center">
          <i class="iconmove fa-solid fa-calendar" style="color: #f66b0e;"></i>
          <h5 id="indexcard" class="card-title"><%= move.date.present? ? Time.at(move.date) : "" %> UTC</h5>
        </div>
        <div class="d-flex align-items-center">
          <i class="iconmove fa-solid fa-location-dot" style="color: #f66b0e;"></i>
          <h5 id="indexcard" class="card-text"><%= move.start_point %></h5>
        </div>
        <div class="d-flex align-items-center">
          <i class="iconmove fa-solid fa-map-pin" style="color: #f66b0e;"></i>
          <h5 id="indexcard" class="card-text"><%= move.end_point %></h5>
        </div>
        <div class="d-flex justify-content-between">
          <a href="#" data-action="click->popup#open" class="small_button">See details</a>
          <%= link_to "Edit", edit_move_path(move.id), class: "small_button" %>
        </div>
      </div>
    </div>
    <div id="<%= move.id %>" class="d-none">
      <%= render "show", move: move %>
    </div>
  <% end %>
</div>
